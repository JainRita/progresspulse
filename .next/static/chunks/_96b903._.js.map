{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/actions/sprints.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth } from \"@clerk/nextjs/server\";\n\nexport async function createSprint(projectId, data) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const project = await db.project.findUnique({\n    where: { id: projectId },\n    include: { sprints: { orderBy: { createdAt: \"desc\" } } },\n  });\n\n  if (!project || project.organizationId !== orgId) {\n    throw new Error(\"Project not found\");\n  }\n\n  const sprint = await db.sprint.create({\n    data: {\n      name: data.name,\n      startDate: data.startDate,\n      endDate: data.endDate,\n      status: \"PLANNED\",\n      projectId: projectId,\n    },\n  });\n\n  return sprint;\n}\n\nexport async function updateSprintStatus(sprintId, newStatus) {\n  const { userId, orgId, orgRole } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  try {\n    const sprint = await db.sprint.findUnique({\n      where: { id: sprintId },\n      include: { project: true },\n    });\n    console.log(sprint, orgRole);\n\n    if (!sprint) {\n      throw new Error(\"Sprint not found\");\n    }\n\n    if (sprint.project.organizationId !== orgId) {\n      throw new Error(\"Unauthorized\");\n    }\n\n    if (orgRole !== \"org:admin\") {\n      throw new Error(\"Only Admin can make this change\");\n    }\n\n    const now = new Date();\n    const startDate = new Date(sprint.startDate);\n    const endDate = new Date(sprint.endDate);\n\n    if (newStatus === \"ACTIVE\" && (now < startDate || now > endDate)) {\n      throw new Error(\"Cannot start sprint outside of its date range\");\n    }\n\n    if (newStatus === \"COMPLETED\" && sprint.status !== \"ACTIVE\") {\n      throw new Error(\"Can only complete an active sprint\");\n    }\n\n    const updatedSprint = await db.sprint.update({\n      where: { id: sprintId },\n      data: { status: newStatus },\n    });\n\n    return { success: true, sprint: updatedSprint };\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}"],"names":[],"mappings":";;;;;;IAKsB;IA6BA"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/lib/utils.js"],"sourcesContent":["import { clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAM;IAC1B,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,OAAI,AAAD,EAAE;AACtB"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/ui/button.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2\",\r\n        sm: \"h-8 rounded-md px-3 text-xs\",\r\n        lg: \"h-10 rounded-md px-8\",\r\n        icon: \"h-9 w-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Button = React.forwardRef(({ className, variant, size, asChild = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\"\r\n  return (\r\n    (<Comp\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      ref={ref}\r\n      {...props} />)\r\n  );\r\n})\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AAEA;AAHA;;;;;;AAKA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,ySACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,MAAM,uBAAS,8JAAM,UAAU,MAAC,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxF,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAC9B,qBACG,6LAAC;QACA,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAEf;;AACA,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/project/_components/create-sprint.jsx"],"sourcesContent":["\"use client\"\r\nimport { createSprint } from \"@/actions/sprints\";\r\nimport {Button} from \"@/components/ui/button\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport React, { useState } from 'react';\r\nimport { addDays } from \"date-fns\";\r\nimport {useForm } from \"react-hook-form\";\r\n\r\nconst SprintCreationForm = ({projectTitle, projectKey, projectId, sprintkey }) => {\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [dateRange, setDateRange] = useState({\r\n        from: new Date(),\r\n        to: addDays(new Date(), 14),\r\n    }); \r\n\r\n    const {register, handleSubmit, formState: {errors}, control} = useForm({\r\n        resolver: zodResolver(createSprint),\r\n        defaultValues: {\r\n            name: `${projectKey}-${sprintKey}`,\r\n            startDate: dateRange.from,\r\n            endDate: dateRange.to,\r\n        },\r\n    });\r\n\r\n    const onSubmit = async (data) => {\r\n        await createSprintFn(projectId, {\r\n          ...data,\r\n          startDate: dateRange.from,\r\n          endDate: dateRange.to,\r\n        });\r\n        setShowForm(false);\r\n        router.refresh(); // Refresh the page to show updated data\r\n      };\r\n    \r\n      return (\r\n        <>\r\n          <div className=\"flex justify-between\">\r\n            <h1 className=\"text-5xl font-bold mb-8 gradient-title\">\r\n              {projectTitle}\r\n            </h1>\r\n            <Button\r\n              className=\"mt-2\"\r\n              onClick={() => setShowForm(!showForm)}\r\n              variant={!showForm ? \"default\" : \"destructive\"}\r\n            >\r\n              {!showForm ? \"Create New Sprint\" : \"Cancel\"}\r\n            </Button>\r\n          </div>\r\n          {showForm && (\r\n            <Card className=\"pt-4 mb-4\">\r\n              <CardContent>\r\n                <form onSubmit={handleSubmit(onSubmit)} className=\"flex gap-4 items-end\">\r\n                  <div className=\"flex-1\">\r\n                    <label htmlFor=\"name\" className=\"block text-sm font-medium mb-1\">\r\n                      Sprint Name\r\n                    </label>\r\n                    <Input id=\"name\" {...register(\"name\")} readOnly className=\"bg-slate-950\"/>\r\n                    {errors.name && (\r\n                      <p className=\"text-red-500 text-sm mt-1\">\r\n                        {errors.name.message}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <label className=\"block text-sm font-medium mb-1\">\r\n                      Sprint Duration\r\n                    </label>\r\n                    <Controller\r\n                      control={control}\r\n                      name=\"dateRange\"\r\n                      render={({ field }) => (\r\n                        <Popover>\r\n                          <PopoverTrigger asChild>\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              className={`w-full justify-start text-left font-normal bg-slate-950 ${\r\n                                !dateRange && \"text-muted-foreground\"\r\n                              }`}\r\n                            >\r\n                              <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                              {dateRange.from && dateRange.to ? (\r\n                                format(dateRange.from, \"LLL dd, y\") +\r\n                                \" - \" +\r\n                                format(dateRange.to, \"LLL dd, y\")\r\n                              ) : (\r\n                                <span>Pick a date</span>\r\n                              )}\r\n                            </Button>\r\n                          </PopoverTrigger>\r\n                          <PopoverContent\r\n                            className=\"w-auto bg-slate-900\"\r\n                            align=\"start\"\r\n                          >\r\n                            <DayPicker\r\n                              classNames={{\r\n                                chevron: \"fill-blue-500\",\r\n                                range_start: \"bg-blue-700\",\r\n                                range_end: \"bg-blue-700\",\r\n                                range_middle: \"bg-blue-400\",\r\n                                day_button: \"border-none\",\r\n                                today: \"border-2 border-blue-700\",\r\n                              }}\r\n                              mode=\"range\"\r\n                              disabled={[{ before: new Date() }]}\r\n                              selected={dateRange}\r\n                              onSelect={(range) => {\r\n                                if (range?.from && range?.to) {\r\n                                  setDateRange(range);\r\n                                  field.onChange(range);\r\n                                }\r\n                              }}\r\n                            />\r\n                          </PopoverContent>\r\n                        </Popover>\r\n                      )}\r\n                    />\r\n                  </div>\r\n                  <Button type=\"submit\" disabled={createSprintLoading}>\r\n                    {createSprintLoading ? \"Creating...\" : \"Create Sprint\"}\r\n                  </Button>\r\n                </form>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n\r\nexport default SprintCreationForm;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}