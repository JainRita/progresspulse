{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/actions/organizations.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth, clerkClient } from \"@clerk/nextjs/server\";\n\nexport async function getOrganization(slug) {\n  const { userId } = auth();\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  // Get the organization details\n  const organization = await clerkClient().organizations.getOrganization({\n    slug,\n  });\n\n  if (!organization) {\n    return null;\n  }\n\n  // Check if user belongs to this organization\n  const { data: membership } =\n    await clerkClient().organizations.getOrganizationMembershipList({\n      organizationId: organization.id,\n    });\n\n  const userMembership = membership.find(\n    (member) => member.publicUserData.userId === userId\n  );\n\n  // If user is not a member, return null\n  if (!userMembership) {\n    return null;\n  }\n\n  return organization;\n}\n\nexport async function getProjects(orgId) {\n  const { userId } = auth();\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const projects = await db.project.findMany({\n    where: { organizationId: orgId },\n    orderBy: { createdAt: \"desc\" },\n  });\n\n  return projects;\n}\n\nexport async function getUserIssues(userId) {\n  const { orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"No user id or organization id found\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const issues = await db.issue.findMany({\n    where: {\n      OR: [{ assigneeId: user.id }, { reporterId: user.id }],\n      project: {\n        organizationId: orgId,\n      },\n    },\n    include: {\n      project: true,\n      assignee: true,\n      reporter: true,\n    },\n    orderBy: { updatedAt: \"desc\" },\n  });\n\n  return issues;\n}\n\nexport async function getOrganizationUsers(orgId) {\n  const { userId } = auth();\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const organizationMemberships =\n    await clerkClient().organizations.getOrganizationMembershipList({\n      organizationId: orgId,\n    });\n\n  const userIds = organizationMemberships.data.map(\n    (membership) => membership.publicUserData.userId\n  );\n\n  const users = await db.user.findMany({\n    where: {\n      clerkUserId: {\n        in: userIds,\n      },\n    },\n  });\n\n  return users;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/organization/%5BorgId%5D/page.jsx"],"sourcesContent":["import { getOrganization } from '@/actions/organizations';\r\nimport { OrganizationSwitcher } from '@clerk/nextjs';\r\nimport React from 'react'\r\n\r\nconst Organization = async ({params}) => {\r\n  const {orgId} = params;\r\n  const organization = await getOrganization(orgId);\r\n\r\n  if(!organization){\r\n    return <div> Organization not found </div>;\r\n  }\r\n  return (\r\n    <div className=\"container mx-auto\"> \r\n      <div className=\"mb-4 flex flex-col sm:flex-row justify-between items-start\">\r\n        <h1 className=\"text-5xl font-bold gradient-title pb-2\">\r\n          {organization.name}&rsquo;s Projects\r\n        </h1>\r\n      </div>\r\n      <div className=\"mb-4\"> Show org projects </div>\r\n      <div className=\"mt-8\"> Show user assigned and reported issues here </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Organization;"],"names":[],"mappings":";;;;AAAA;AAEA;;;;;AAEA,MAAM,eAAe,OAAO,EAAC,MAAM,EAAC;IAClC,MAAM,EAAC,KAAK,EAAC,GAAG;IAChB,MAAM,eAAe,MAAM,CAAA,GAAA,wHAAA,CAAA,kBAAe,AAAD,EAAE;IAE3C,IAAG,CAAC,cAAa;QACf,qBAAO,8OAAC;sBAAI;;;;;;IACd;IACA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;;wBACX,aAAa,IAAI;wBAAC;;;;;;;;;;;;0BAGvB,8OAAC;gBAAI,WAAU;0BAAO;;;;;;0BACtB,8OAAC;gBAAI,WAAU;0BAAO;;;;;;;;;;;;AAG5B;uCAEe"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}