{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/actions/organizations.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth, clerkClient } from \"@clerk/nextjs/server\";\n\nexport async function getOrganization(slug) {\n  const { userId } = auth();\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  // Get the organization details\n  const organization = await clerkClient().organizations.getOrganization({\n    slug,\n  });\n\n  if (!organization) {\n    return null;\n  }\n\n  // Check if user belongs to this organization\n  const { data: membership } =\n    await clerkClient().organizations.getOrganizationMembershipList({\n      organizationId: organization.id,\n    });\n\n  const userMembership = membership.find(\n    (member) => member.publicUserData.userId === userId\n  );\n\n  // If user is not a member, return null\n  if (!userMembership) {\n    return null;\n  }\n\n  return organization;\n}\n\nexport async function getProjects(orgId) {\n  const { userId } = auth();\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const projects = await db.project.findMany({\n    where: { organizationId: orgId },\n    orderBy: { createdAt: \"desc\" },\n  });\n\n  return projects;\n}\n\nexport async function getUserIssues(userId) {\n  const { orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"No user id or organization id found\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const issues = await db.issue.findMany({\n    where: {\n      OR: [{ assigneeId: user.id }, { reporterId: user.id }],\n      project: {\n        organizationId: orgId,\n      },\n    },\n    include: {\n      project: true,\n      assignee: true,\n      reporter: true,\n    },\n    orderBy: { updatedAt: \"desc\" },\n  });\n\n  return issues;\n}\n\nexport async function getOrganizationUsers(orgId) {\n  const { userId } = auth();\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const organizationMemberships =\n    await clerkClient().organizations.getOrganizationMembershipList({\n      organizationId: orgId,\n    });\n\n  const userIds = organizationMemberships.data.map(\n    (membership) => membership.publicUserData.userId\n  );\n\n  const users = await db.user.findMany({\n    where: {\n      clerkUserId: {\n        in: userIds,\n      },\n    },\n  });\n\n  return users;\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/org-switcher.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/org-switcher.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/org-switcher.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA+R,GAC5T,6DACA"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/org-switcher.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/org-switcher.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/org-switcher.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA2Q,GACxS,yCACA"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/ui/card.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"rounded-xl border bg-card text-card-foreground shadow\", className)}\r\n    {...props} />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props} />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\r\n    {...props} />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props} />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props} />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,sMAAM,UAAU,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtD,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,yDAAyD;QACtE,GAAG,KAAK;;;;;;AAEb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,sMAAM,UAAU,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,sMAAM,UAAU,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC3D,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAEb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,sMAAM,UAAU,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACjE,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,sMAAM,UAAU,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC7D,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,sMAAM,UAAU,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAEb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/organization/%5BorgId%5D/_components/delete-project.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/organization/[orgId]/_components/delete-project.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/organization/[orgId]/_components/delete-project.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAkU,GAC/V,gGACA"}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/organization/%5BorgId%5D/_components/delete-project.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/organization/[orgId]/_components/delete-project.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/organization/[orgId]/_components/delete-project.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8S,GAC3U,4EACA"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/organization/%5BorgId%5D/_components/project-list.jsx"],"sourcesContent":["import Link from \"next/link\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { getProjects } from \"@/actions/organizations\";\r\nimport DeleteProject from \"./delete-project\";\r\n\r\nexport default async function ProjectList({ orgId }) {\r\n  const projects = await getProjects(orgId);\r\n\r\n  if (projects.length === 0) {\r\n    return (\r\n      <p>\r\n        No projects found.{\" \"}\r\n        <Link className=\"underline underline-offset-2 text-blue-200\"\r\n          href=\"/project/create\"> Create New.\r\n        </Link>\r\n      </p>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n      {projects.map((project) => (\r\n        <Card key={project.id}>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex justify-between items-center\">\r\n              {project.name}\r\n              <DeleteProject projectId={project.id} />\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <p className=\"text-sm text-gray-500 mb-4\">{project.description}</p>\r\n            <Link href={`/project/${project.id}`} className=\"text-blue-500 hover:underline\">\r\n              View Project\r\n            </Link>\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;AAEe,eAAe,YAAY,EAAE,KAAK,EAAE;IACjD,MAAM,WAAW,MAAM,CAAA,GAAA,wHAAA,CAAA,cAAW,AAAD,EAAE;IAEnC,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,qBACE,8OAAC;;gBAAE;gBACkB;8BACnB,8OAAC,4JAAA,CAAA,UAAI;oBAAC,WAAU;oBACd,MAAK;8BAAkB;;;;;;;;;;;;IAI/B;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC,yHAAA,CAAA,OAAI;;kCACH,8OAAC,yHAAA,CAAA,aAAU;kCACT,cAAA,8OAAC,yHAAA,CAAA,YAAS;4BAAC,WAAU;;gCAClB,QAAQ,IAAI;8CACb,8OAAC,iLAAA,CAAA,UAAa;oCAAC,WAAW,QAAQ,EAAE;;;;;;;;;;;;;;;;;kCAGxC,8OAAC,yHAAA,CAAA,cAAW;;0CACV,8OAAC;gCAAE,WAAU;0CAA8B,QAAQ,WAAW;;;;;;0CAC9D,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAM,CAAC,SAAS,EAAE,QAAQ,EAAE,EAAE;gCAAE,WAAU;0CAAgC;;;;;;;;;;;;;eATzE,QAAQ,EAAE;;;;;;;;;;AAiB7B"}},
    {"offset": {"line": 415, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/organization/%5BorgId%5D/page.jsx"],"sourcesContent":["import { getOrganization } from '@/actions/organizations';\r\nimport OrgSwitcher from '@/components/org-switcher';\r\nimport { OrganizationSwitcher } from '@clerk/nextjs';\r\nimport React from 'react'\r\nimport ProjectList from './_components/project-list';\r\n\r\nconst Organization = async ({params}) => {\r\n  const {orgId} = params;\r\n  const organization = await getOrganization(orgId);\r\n\r\n  if(!organization){\r\n    return <div> Organization not found </div>;\r\n  }\r\n  return (\r\n    <div className=\"container mx-auto\"> \r\n      <div className=\"mb-4 flex flex-col sm:flex-row justify-between items-start\">\r\n        <h1 className=\"text-5xl font-bold gradient-title pb-2\">\r\n          {organization.name}&rsquo;s Projects\r\n        </h1>\r\n        <OrgSwitcher/>\r\n      </div>\r\n      <div className=\"mb-4\"> \r\n      <ProjectList orgId={organization.id}/>\r\n      </div>\r\n      <div className=\"mt-8\"> Show user assigned and reported issues here </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Organization;"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AACA;;;;;;;AAEA,MAAM,eAAe,OAAO,EAAC,MAAM,EAAC;IAClC,MAAM,EAAC,KAAK,EAAC,GAAG;IAChB,MAAM,eAAe,MAAM,CAAA,GAAA,wHAAA,CAAA,kBAAe,AAAD,EAAE;IAE3C,IAAG,CAAC,cAAa;QACf,qBAAO,8OAAC;sBAAI;;;;;;IACd;IACA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;4BACX,aAAa,IAAI;4BAAC;;;;;;;kCAErB,8OAAC,8HAAA,CAAA,UAAW;;;;;;;;;;;0BAEd,8OAAC;gBAAI,WAAU;0BACf,cAAA,8OAAC,+KAAA,CAAA,UAAW;oBAAC,OAAO,aAAa,EAAE;;;;;;;;;;;0BAEnC,8OAAC;gBAAI,WAAU;0BAAO;;;;;;;;;;;;AAG5B;uCAEe"}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 517, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/actions/projects.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth, clerkClient } from \"@clerk/nextjs/server\";\n\nexport async function createProject(data) {\n  const { userId, orgId } = auth();\n\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  if (!orgId) {\n    throw new Error(\"No Organization Selected\");\n  }\n\n  // Check if the user is an admin of the organization\n  const { data: membershipList } =\n    await clerkClient().organizations.getOrganizationMembershipList({\n      organizationId: orgId,\n    });\n\n  const userMembership = membershipList.find(\n    (membership) => membership.publicUserData.userId === userId\n  );\n\n  if (!userMembership || userMembership.role !== \"org:admin\") {\n    throw new Error(\"Only organization admins can create projects\");\n  }\n\n  try {\n    const project = await db.project.create({\n      data: {\n        name: data.name,\n        key: data.key,\n        description: data.description,\n        organizationId: orgId,\n      },\n    });\n\n    return project;\n  } catch (error) {\n    throw new Error(\"Error creating project: \" + error.message);\n  }\n}\n\nexport async function getProject(projectId) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  // Find user to verify existence\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  // Get project with sprints and organization\n  const project = await db.project.findUnique({\n    where: { id: projectId },\n    include: {\n      sprints: {\n        orderBy: { createdAt: \"desc\" },\n      },\n    },\n  });\n\n  if (!project) {\n    throw new Error(\"Project not found\");\n  }\n\n  // Verify project belongs to the organization\n  if (project.organizationId !== orgId) {\n    return null;\n  }\n\n  return project;\n}\n\nexport async function deleteProject(projectId) {\n  const { userId, orgId, orgRole } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  if (orgRole !== \"org:admin\") {\n    throw new Error(\"Only organization admins can delete projects\");\n  }\n\n  const project = await db.project.findUnique({\n    where: { id: projectId },\n  });\n\n  if (!project || project.organizationId !== orgId) {\n    throw new Error(\n      \"Project not found or you don't have permission to delete it\"\n    );\n  }\n\n  await db.project.delete({\n    where: { id: projectId },\n  });\n\n  return { success: true };\n}"],"names":[],"mappings":";;;;;;;AAEA;;AACA;AAAA;;;;;AAEO,eAAe,uCAAW,GAAX,cAAc,IAAI;IACtC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE7B,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM;IAClB;IAEA,oDAAoD;IACpD,MAAM,EAAE,MAAM,cAAc,EAAE,GAC5B,MAAM,CAAA,GAAA,yKAAA,CAAA,cAAW,AAAD,IAAI,aAAa,CAAC,6BAA6B,CAAC;QAC9D,gBAAgB;IAClB;IAEF,MAAM,iBAAiB,eAAe,IAAI,CACxC,CAAC,aAAe,WAAW,cAAc,CAAC,MAAM,KAAK;IAGvD,IAAI,CAAC,kBAAkB,eAAe,IAAI,KAAK,aAAa;QAC1D,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,MAAM,CAAC;YACtC,MAAM;gBACJ,MAAM,KAAK,IAAI;gBACf,KAAK,KAAK,GAAG;gBACb,aAAa,KAAK,WAAW;gBAC7B,gBAAgB;YAClB;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MAAM,6BAA6B,MAAM,OAAO;IAC5D;AACF;AAEO,eAAe,uCAAQ,GAAR,WAAW,SAAS;IACxC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE7B,IAAI,CAAC,UAAU,CAAC,OAAO;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,gCAAgC;IAChC,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,4CAA4C;IAC5C,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE,IAAI;QAAU;QACvB,SAAS;YACP,SAAS;gBACP,SAAS;oBAAE,WAAW;gBAAO;YAC/B;QACF;IACF;IAEA,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IAEA,6CAA6C;IAC7C,IAAI,QAAQ,cAAc,KAAK,OAAO;QACpC,OAAO;IACT;IAEA,OAAO;AACT;AAEO,eAAe,uCAAW,GAAX,cAAc,SAAS;IAC3C,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAEtC,IAAI,CAAC,UAAU,CAAC,OAAO;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,YAAY,aAAa;QAC3B,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE,IAAI;QAAU;IACzB;IAEA,IAAI,CAAC,WAAW,QAAQ,cAAc,KAAK,OAAO;QAChD,MAAM,IAAI,MACR;IAEJ;IAEA,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QACtB,OAAO;YAAE,IAAI;QAAU;IACzB;IAEA,OAAO;QAAE,SAAS;IAAK;AACzB;;;IAzGsB;IAyCA;IAsCA;;AA/EA,+OAAA;AAyCA,+OAAA;AAsCA,+OAAA"}},
    {"offset": {"line": 632, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}