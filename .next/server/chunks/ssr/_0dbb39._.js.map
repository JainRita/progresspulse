{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/actions/organizations.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth, clerkClient } from \"@clerk/nextjs/server\";\n\nexport async function getOrganization(slug) {\n  const { userId } = auth();\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  // Get the organization details\n  const organization = await clerkClient().organizations.getOrganization({\n    slug,\n  });\n\n  if (!organization) {\n    return null;\n  }\n\n  // Check if user belongs to this organization\n  const { data: membership } =\n    await clerkClient().organizations.getOrganizationMembershipList({\n      organizationId: organization.id,\n    });\n\n  const userMembership = membership.find(\n    (member) => member.publicUserData.userId === userId\n  );\n\n  // If user is not a member, return null\n  if (!userMembership) {\n    return null;\n  }\n\n  return organization;\n}\n\nexport async function getProjects(orgId) {\n  const { userId } = auth();\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const projects = await db.project.findMany({\n    where: { organizationId: orgId },\n    orderBy: { createdAt: \"desc\" },\n  });\n\n  return projects;\n}\n\nexport async function getUserIssues(userId) {\n  const { orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"No user id or organization id found\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const issues = await db.issue.findMany({\n    where: {\n      OR: [{ assigneeId: user.id }, { reporterId: user.id }],\n      project: {\n        organizationId: orgId,\n      },\n    },\n    include: {\n      project: true,\n      assignee: true,\n      reporter: true,\n    },\n    orderBy: { updatedAt: \"desc\" },\n  });\n\n  return issues;\n}\n\nexport async function getOrganizationUsers(orgId) {\n  const { userId } = auth();\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const organizationMemberships =\n    await clerkClient().organizations.getOrganizationMembershipList({\n      organizationId: orgId,\n    });\n\n  const userIds = organizationMemberships.data.map(\n    (membership) => membership.publicUserData.userId\n  );\n\n  const users = await db.user.findMany({\n    where: {\n      clerkUserId: {\n        in: userIds,\n      },\n    },\n  });\n\n  return users;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/org-switcher.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/org-switcher.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/org-switcher.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA+R,GAC5T,6DACA"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/org-switcher.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/org-switcher.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/org-switcher.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA2Q,GACxS,yCACA"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/ui/tabs.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const Tabs = registerClientReference(\n    function() { throw new Error(\"Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/tabs.jsx <module evaluation>\",\n    \"Tabs\",\n);\nexport const TabsContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/tabs.jsx <module evaluation>\",\n    \"TabsContent\",\n);\nexport const TabsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/tabs.jsx <module evaluation>\",\n    \"TabsList\",\n);\nexport const TabsTrigger = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/tabs.jsx <module evaluation>\",\n    \"TabsTrigger\",\n);\n"],"names":[],"mappings":";;;;;;AAAA;;AACO,MAAM,OAAO,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtC;IAAa,MAAM,IAAI,MAAM;AAAwN,GACrP,wDACA;AAEG,MAAM,cAAc,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC7C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,wDACA;AAEG,MAAM,WAAW,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC1C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,wDACA;AAEG,MAAM,cAAc,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC7C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,wDACA"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/ui/tabs.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const Tabs = registerClientReference(\n    function() { throw new Error(\"Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/tabs.jsx\",\n    \"Tabs\",\n);\nexport const TabsContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/tabs.jsx\",\n    \"TabsContent\",\n);\nexport const TabsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/tabs.jsx\",\n    \"TabsList\",\n);\nexport const TabsTrigger = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/tabs.jsx\",\n    \"TabsTrigger\",\n);\n"],"names":[],"mappings":";;;;;;AAAA;;AACO,MAAM,OAAO,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtC;IAAa,MAAM,IAAI,MAAM;AAAwN,GACrP,oCACA;AAEG,MAAM,cAAc,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC7C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,oCACA;AAEG,MAAM,WAAW,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC1C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,oCACA;AAEG,MAAM,cAAc,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC7C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,oCACA"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/issue-card.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/issue-card.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/issue-card.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA6R,GAC1T,2DACA"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/components/issue-card.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/issue-card.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/issue-card.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAyQ,GACtS,uCACA"}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/organization/%5BorgId%5D/_components/user-issues.jsx"],"sourcesContent":["import { Suspense } from \"react\";\r\nimport { getUserIssues } from \"@/actions/organizations\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport IssueCard from \"@/components/issue-card\";\r\n\r\nexport default async function UserIssues({ userId }) {\r\n  const issues = await getUserIssues(userId);\r\n\r\n  if (issues.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const assignedIssues = issues.filter(\r\n    (issue) => issue.assignee.clerkUserId === userId\r\n  );\r\n  const reportedIssues = issues.filter(\r\n    (issue) => issue.reporter.clerkUserId === userId\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <h1 className=\"text-4xl font-bold gradient-title mb-4\">My Issues</h1>\r\n\r\n      <Tabs defaultValue=\"assigned\" className=\"w-full\">\r\n        <TabsList>\r\n          <TabsTrigger value=\"assigned\">Assigned to You</TabsTrigger>\r\n          <TabsTrigger value=\"reported\">Reported by You</TabsTrigger>\r\n        </TabsList>\r\n        <TabsContent value=\"assigned\">\r\n          <Suspense fallback={<div>Loading...</div>}>\r\n            <IssueGrid issues={assignedIssues} />\r\n          </Suspense>\r\n        </TabsContent>\r\n        <TabsContent value=\"reported\">\r\n          <Suspense fallback={<div>Loading...</div>}>\r\n            <IssueGrid issues={reportedIssues} />\r\n          </Suspense>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction IssueGrid({ issues }) {\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n      {issues.map((issue) => (\r\n        <IssueCard key={issue.id} issue={issue} showStatus />\r\n      ))}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;AAEe,eAAe,WAAW,EAAE,MAAM,EAAE;IACjD,MAAM,SAAS,MAAM,CAAA,GAAA,wHAAA,CAAA,gBAAa,AAAD,EAAE;IAEnC,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,OAAO;IACT;IAEA,MAAM,iBAAiB,OAAO,MAAM,CAClC,CAAC,QAAU,MAAM,QAAQ,CAAC,WAAW,KAAK;IAE5C,MAAM,iBAAiB,OAAO,MAAM,CAClC,CAAC,QAAU,MAAM,QAAQ,CAAC,WAAW,KAAK;IAG5C,qBACE;;0BACE,8OAAC;gBAAG,WAAU;0BAAyC;;;;;;0BAEvD,8OAAC,yHAAA,CAAA,OAAI;gBAAC,cAAa;gBAAW,WAAU;;kCACtC,8OAAC,yHAAA,CAAA,WAAQ;;0CACP,8OAAC,yHAAA,CAAA,cAAW;gCAAC,OAAM;0CAAW;;;;;;0CAC9B,8OAAC,yHAAA,CAAA,cAAW;gCAAC,OAAM;0CAAW;;;;;;;;;;;;kCAEhC,8OAAC,yHAAA,CAAA,cAAW;wBAAC,OAAM;kCACjB,cAAA,8OAAC,qMAAA,CAAA,WAAQ;4BAAC,wBAAU,8OAAC;0CAAI;;;;;;sCACvB,cAAA,8OAAC;gCAAU,QAAQ;;;;;;;;;;;;;;;;kCAGvB,8OAAC,yHAAA,CAAA,cAAW;wBAAC,OAAM;kCACjB,cAAA,8OAAC,qMAAA,CAAA,WAAQ;4BAAC,wBAAU,8OAAC;0CAAI;;;;;;sCACvB,cAAA,8OAAC;gCAAU,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;AAM/B;AAEA,SAAS,UAAU,EAAE,MAAM,EAAE;IAC3B,qBACE,8OAAC;QAAI,WAAU;kBACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC,4HAAA,CAAA,UAAS;gBAAgB,OAAO;gBAAO,UAAU;eAAlC,MAAM,EAAE;;;;;;;;;;AAIhC"}},
    {"offset": {"line": 439, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/organization/%5BorgId%5D/page.jsx"],"sourcesContent":["import { auth } from \"@clerk/nextjs/server\";\r\nimport { redirect } from \"next/navigation\";\r\nimport { getOrganization } from \"@/actions/organizations\";\r\nimport OrgSwitcher from \"@/components/org-switcher\";\r\nimport ProjectList from \"./_components/project-list\";\r\nimport UserIssues from \"./_components/user-issues\";\r\n\r\nexport default async function OrganizationPage({ params }) {\r\n  const { orgId } = params;\r\n  const { userId } = auth();\r\n\r\n  if (!userId) {\r\n    redirect(\"/sign-in\");\r\n  }\r\n\r\n  const organization = await getOrganization(orgId);\r\n\r\n  if (!organization) {\r\n    return <div>Organization not found</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4\">\r\n      <div className=\"mb-4 flex flex-col sm:flex-row justify-between items-start\">\r\n        <h1 className=\"text-5xl font-bold gradient-title pb-2\">\r\n          {organization.name}&rsquo;s Projects\r\n        </h1>\r\n\r\n        <OrgSwitcher />\r\n      </div>\r\n      <div className=\"mb-4\">\r\n        <ProjectList orgId={organization.id} />\r\n      </div>\r\n      <div className=\"mt-8\">\r\n        <UserIssues userId={userId} />\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AALA;AACA;;;;;;;;AAMe,eAAe,iBAAiB,EAAE,MAAM,EAAE;IACvD,MAAM,EAAE,KAAK,EAAE,GAAG;IAClB,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAEtB,IAAI,CAAC,QAAQ;QACX,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACX;IAEA,MAAM,eAAe,MAAM,CAAA,GAAA,wHAAA,CAAA,kBAAe,AAAD,EAAE;IAE3C,IAAI,CAAC,cAAc;QACjB,qBAAO,8OAAC;sBAAI;;;;;;IACd;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;4BACX,aAAa,IAAI;4BAAC;;;;;;;kCAGrB,8OAAC,8HAAA,CAAA,UAAW;;;;;;;;;;;0BAEd,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,+KAAA,CAAA,UAAW;oBAAC,OAAO,aAAa,EAAE;;;;;;;;;;;0BAErC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,8KAAA,CAAA,UAAU;oBAAC,QAAQ;;;;;;;;;;;;;;;;;AAI5B"}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 554, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/actions/issues.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth } from \"@clerk/nextjs/server\";\n\nexport async function getIssuesForSprint(sprintId) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const issues = await db.issue.findMany({\n    where: { sprintId: sprintId },\n    orderBy: [{ status: \"asc\" }, { order: \"asc\" }],\n    include: {\n      assignee: true,\n      reporter: true,\n    },\n  });\n\n  return issues;\n}\n\nexport async function createIssue(projectId, data) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  let user = await db.user.findUnique({ where: { clerkUserId: userId } });\n\n  const lastIssue = await db.issue.findFirst({\n    where: { projectId, status: data.status },\n    orderBy: { order: \"desc\" },\n  });\n\n  const newOrder = lastIssue ? lastIssue.order + 1 : 0;\n\n  const issue = await db.issue.create({\n    data: {\n      title: data.title,\n      description: data.description,\n      status: data.status,\n      priority: data.priority,\n      projectId: projectId,\n      sprintId: data.sprintId,\n      reporterId: user.id,\n      assigneeId: data.assigneeId || null, // Add this line\n      order: newOrder,\n    },\n    include: {\n      assignee: true,\n      reporter: true,\n    },\n  });\n\n  return issue;\n}\n\nexport async function updateIssueOrder(updatedIssues) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  // Start a transaction\n  await db.$transaction(async (prisma) => {\n    // Update each issue\n    for (const issue of updatedIssues) {\n      await prisma.issue.update({\n        where: { id: issue.id },\n        data: {\n          status: issue.status,\n          order: issue.order,\n        },\n      });\n    }\n  });\n\n  return { success: true };\n}\n\nexport async function deleteIssue(issueId) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  const issue = await db.issue.findUnique({\n    where: { id: issueId },\n    include: { project: true },\n  });\n\n  if (!issue) {\n    throw new Error(\"Issue not found\");\n  }\n\n  if (\n    issue.reporterId !== user.id &&\n    !issue.project.adminIds.includes(user.id)\n  ) {\n    throw new Error(\"You don't have permission to delete this issue\");\n  }\n\n  await db.issue.delete({ where: { id: issueId } });\n\n  return { success: true };\n}\n\nexport async function updateIssue(issueId, data) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  try {\n    const issue = await db.issue.findUnique({\n      where: { id: issueId },\n      include: { project: true },\n    });\n\n    if (!issue) {\n      throw new Error(\"Issue not found\");\n    }\n\n    if (issue.project.organizationId !== orgId) {\n      throw new Error(\"Unauthorized\");\n    }\n\n    const updatedIssue = await db.issue.update({\n      where: { id: issueId },\n      data: {\n        status: data.status,\n        priority: data.priority,\n      },\n      include: {\n        assignee: true,\n        reporter: true,\n      },\n    });\n\n    return updatedIssue;\n  } catch (error) {\n    throw new Error(\"Error updating issue: \" + error.message);\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}