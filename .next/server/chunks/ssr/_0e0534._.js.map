{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/project/create/page.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/project/create/page.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/project/create/page.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAsS,GACnU,oEACA"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/project/create/page.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/project/create/page.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/project/create/page.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/actions/projects.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth, clerkClient } from \"@clerk/nextjs/server\";\n\nexport async function createProject(data) {\n  const { userId, orgId } = auth();\n\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  if (!orgId) {\n    throw new Error(\"No Organization Selected\");\n  }\n\n  // Check if the user is an admin of the organization\n  const { data: membershipList } =\n    await clerkClient().organizations.getOrganizationMembershipList({\n      organizationId: orgId,\n    });\n\n  const userMembership = membershipList.find(\n    (membership) => membership.publicUserData.userId === userId\n  );\n\n  if (!userMembership || userMembership.role !== \"org:admin\") {\n    throw new Error(\"Only organization admins can create projects\");\n  }\n\n  try {\n    const project = await db.project.create({\n      data: {\n        name: data.name,\n        key: data.key,\n        description: data.description,\n        organizationId: orgId,\n      },\n    });\n\n    return project;\n  } catch (error) {\n    throw new Error(\"Error creating project: \" + error.message);\n  }\n}\n\nexport async function getProject(projectId) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  // Find user to verify existence\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  // Get project with sprints and organization\n  const project = await db.project.findUnique({\n    where: { id: projectId },\n    include: {\n      sprints: {\n        orderBy: { createdAt: \"desc\" },\n      },\n    },\n  });\n\n  if (!project) {\n    throw new Error(\"Project not found\");\n  }\n\n  // Verify project belongs to the organization\n  if (project.organizationId !== orgId) {\n    return null;\n  }\n\n  return project;\n}\n\nexport async function deleteProject(projectId) {\n  const { userId, orgId, orgRole } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  if (orgRole !== \"org:admin\") {\n    throw new Error(\"Only organization admins can delete projects\");\n  }\n\n  const project = await db.project.findUnique({\n    where: { id: projectId },\n  });\n\n  if (!project || project.organizationId !== orgId) {\n    throw new Error(\n      \"Project not found or you don't have permission to delete it\"\n    );\n  }\n\n  await db.project.delete({\n    where: { id: projectId },\n  });\n\n  return { success: true };\n}"],"names":[],"mappings":";;;;;;;AAEA;;AACA;AAAA;;;;;AAEO,eAAe,uCAAW,GAAX,cAAc,IAAI;IACtC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE7B,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM;IAClB;IAEA,oDAAoD;IACpD,MAAM,EAAE,MAAM,cAAc,EAAE,GAC5B,MAAM,CAAA,GAAA,yKAAA,CAAA,cAAW,AAAD,IAAI,aAAa,CAAC,6BAA6B,CAAC;QAC9D,gBAAgB;IAClB;IAEF,MAAM,iBAAiB,eAAe,IAAI,CACxC,CAAC,aAAe,WAAW,cAAc,CAAC,MAAM,KAAK;IAGvD,IAAI,CAAC,kBAAkB,eAAe,IAAI,KAAK,aAAa;QAC1D,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,MAAM,CAAC;YACtC,MAAM;gBACJ,MAAM,KAAK,IAAI;gBACf,KAAK,KAAK,GAAG;gBACb,aAAa,KAAK,WAAW;gBAC7B,gBAAgB;YAClB;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MAAM,6BAA6B,MAAM,OAAO;IAC5D;AACF;AAEO,eAAe,uCAAQ,GAAR,WAAW,SAAS;IACxC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE7B,IAAI,CAAC,UAAU,CAAC,OAAO;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,gCAAgC;IAChC,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,4CAA4C;IAC5C,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE,IAAI;QAAU;QACvB,SAAS;YACP,SAAS;gBACP,SAAS;oBAAE,WAAW;gBAAO;YAC/B;QACF;IACF;IAEA,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IAEA,6CAA6C;IAC7C,IAAI,QAAQ,cAAc,KAAK,OAAO;QACpC,OAAO;IACT;IAEA,OAAO;AACT;AAEO,eAAe,uCAAW,GAAX,cAAc,SAAS;IAC3C,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAEtC,IAAI,CAAC,UAAU,CAAC,OAAO;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,YAAY,aAAa;QAC3B,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE,IAAI;QAAU;IACzB;IAEA,IAAI,CAAC,WAAW,QAAQ,cAAc,KAAK,OAAO;QAChD,MAAM,IAAI,MACR;IAEJ;IAEA,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QACtB,OAAO;YAAE,IAAI;QAAU;IACzB;IAEA,OAAO;QAAE,SAAS;IAAK;AACzB;;;IAzGsB;IAyCA;IAsCA;;AA/EA,+OAAA;AAyCA,+OAAA;AAsCA,+OAAA"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}