{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/actions/projects.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth, clerkClient } from \"@clerk/nextjs/server\";\n\nexport async function createProject(data) {\n  const { userId, orgId } = auth();\n\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  if (!orgId) {\n    throw new Error(\"No Organization Selected\");\n  }\n\n  // Check if the user is an admin of the organization\n  const { data: membershipList } =\n    await clerkClient().organizations.getOrganizationMembershipList({\n      organizationId: orgId,\n    });\n\n  const userMembership = membershipList.find(\n    (membership) => membership.publicUserData.userId === userId\n  );\n\n  if (!userMembership || userMembership.role !== \"org:admin\") {\n    throw new Error(\"Only organization admins can create projects\");\n  }\n\n  try {\n    const project = await db.project.create({\n      data: {\n        name: data.name,\n        key: data.key,\n        description: data.description,\n        organizationId: orgId,\n      },\n    });\n\n    return project;\n  } catch (error) {\n    throw new Error(\"Error creating project: \" + error.message);\n  }\n}\n\nexport async function getProject(projectId) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  // Find user to verify existence\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) {\n    throw new Error(\"User not found\");\n  }\n\n  // Get project with sprints and organization\n  const project = await db.project.findUnique({\n    where: { id: projectId },\n    include: {\n      sprints: {\n        orderBy: { createdAt: \"desc\" },\n      },\n    },\n  });\n\n  if (!project) {\n    throw new Error(\"Project not found\");\n  }\n\n  // Verify project belongs to the organization\n  if (project.organizationId !== orgId) {\n    return null;\n  }\n\n  return project;\n}\n\nexport async function deleteProject(projectId) {\n  const { userId, orgId, orgRole } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  if (orgRole !== \"org:admin\") {\n    throw new Error(\"Only organization admins can delete projects\");\n  }\n\n  const project = await db.project.findUnique({\n    where: { id: projectId },\n  });\n\n  if (!project || project.organizationId !== orgId) {\n    throw new Error(\n      \"Project not found or you don't have permission to delete it\"\n    );\n  }\n\n  await db.project.delete({\n    where: { id: projectId },\n  });\n\n  return { success: true };\n}"],"names":[],"mappings":";;;;;;;AAEA;;AACA;AAAA;;;;;AAEO,eAAe,uCAAW,GAAX,cAAc,IAAI;IACtC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE7B,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM;IAClB;IAEA,oDAAoD;IACpD,MAAM,EAAE,MAAM,cAAc,EAAE,GAC5B,MAAM,CAAA,GAAA,yKAAA,CAAA,cAAW,AAAD,IAAI,aAAa,CAAC,6BAA6B,CAAC;QAC9D,gBAAgB;IAClB;IAEF,MAAM,iBAAiB,eAAe,IAAI,CACxC,CAAC,aAAe,WAAW,cAAc,CAAC,MAAM,KAAK;IAGvD,IAAI,CAAC,kBAAkB,eAAe,IAAI,KAAK,aAAa;QAC1D,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,MAAM,CAAC;YACtC,MAAM;gBACJ,MAAM,KAAK,IAAI;gBACf,KAAK,KAAK,GAAG;gBACb,aAAa,KAAK,WAAW;gBAC7B,gBAAgB;YAClB;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MAAM,6BAA6B,MAAM,OAAO;IAC5D;AACF;AAEO,eAAe,uCAAQ,GAAR,WAAW,SAAS;IACxC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE7B,IAAI,CAAC,UAAU,CAAC,OAAO;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,gCAAgC;IAChC,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,4CAA4C;IAC5C,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE,IAAI;QAAU;QACvB,SAAS;YACP,SAAS;gBACP,SAAS;oBAAE,WAAW;gBAAO;YAC/B;QACF;IACF;IAEA,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IAEA,6CAA6C;IAC7C,IAAI,QAAQ,cAAc,KAAK,OAAO;QACpC,OAAO;IACT;IAEA,OAAO;AACT;AAEO,eAAe,uCAAW,GAAX,cAAc,SAAS;IAC3C,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAEtC,IAAI,CAAC,UAAU,CAAC,OAAO;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,YAAY,aAAa;QAC3B,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE,IAAI;QAAU;IACzB;IAEA,IAAI,CAAC,WAAW,QAAQ,cAAc,KAAK,OAAO;QAChD,MAAM,IAAI,MACR;IAEJ;IAEA,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QACtB,OAAO;YAAE,IAAI;QAAU;IACzB;IAEA,OAAO;QAAE,SAAS;IAAK;AACzB;;;IAzGsB;IAyCA;IAsCA;;AA/EA,+OAAA;AAyCA,+OAAA;AAsCA,+OAAA"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/project/_components/create-sprint.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/project/_components/create-sprint.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/project/_components/create-sprint.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoT,GACjV,kFACA"}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/project/_components/create-sprint.jsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/project/_components/create-sprint.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/project/_components/create-sprint.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgS,GAC7T,8DACA"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/project/_components/sprint-board.jsx"],"sourcesContent":["import React from 'react'\r\n\r\nconst SprintBoard = ({ sprints, projectId, orgId}) => {\r\n    \r\n  return <div>\r\n    {/* <SprintManager /> */}\r\n  </div>\r\n}\r\n\r\nexport default SprintBoard;"],"names":[],"mappings":";;;;AAAA;;;AAEA,MAAM,cAAc,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,KAAK,EAAC;IAE/C,qBAAO,8OAAC;;;;;AAGV;uCAEe"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/app/%28main%29/project/%5BprojectId%5D/page.jsx"],"sourcesContent":["import { getProject } from \"@/actions/projects\";\r\nimport { notFound } from \"next/navigation\";\r\nimport SprintCreationForm from \"../_components/create-sprint\";\r\nimport SprintBoard from \"../_components/sprint-board\";\r\n\r\nexport default async function ProjectPage({ params }) {\r\n  const { projectId } = params;\r\n  const project = await getProject(projectId);\r\n\r\n  if (!project) {\r\n    notFound();\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto\">\r\n      <SprintCreationForm\r\n        projectTitle={project.name}\r\n        projectId={projectId}\r\n        projectKey={project.key}\r\n        sprintKey={project.sprints?.length + 1}\r\n      />\r\n\r\n      {project.sprints.length > 0 ? (\r\n        <SprintBoard\r\n          sprints={project.sprints}\r\n          projectId={projectId}\r\n          orgId={project.organizationId}\r\n        />\r\n      ) : (\r\n        <div>Create a Sprint from button above</div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAFA;;;;;;AAIe,eAAe,YAAY,EAAE,MAAM,EAAE;IAClD,MAAM,EAAE,SAAS,EAAE,GAAG;IACtB,MAAM,UAAU,MAAM,CAAA,GAAA,mHAAA,CAAA,aAAU,AAAD,EAAE;IAEjC,IAAI,CAAC,SAAS;QACZ,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,8JAAA,CAAA,UAAkB;gBACjB,cAAc,QAAQ,IAAI;gBAC1B,WAAW;gBACX,YAAY,QAAQ,GAAG;gBACvB,WAAW,QAAQ,OAAO,EAAE,SAAS;;;;;;YAGtC,QAAQ,OAAO,CAAC,MAAM,GAAG,kBACxB,8OAAC,6JAAA,CAAA,UAAW;gBACV,SAAS,QAAQ,OAAO;gBACxB,WAAW;gBACX,OAAO,QAAQ,cAAc;;;;;qCAG/B,8OAAC;0BAAI;;;;;;;;;;;;AAIb"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Documents/rita/my-app/actions/sprints.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth } from \"@clerk/nextjs/server\";\n\nexport async function createSprint(projectId, data) {\n  const { userId, orgId } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const project = await db.project.findUnique({\n    where: { id: projectId },\n    include: { sprints: { orderBy: { createdAt: \"desc\" } } },\n  });\n\n  if (!project || project.organizationId !== orgId) {\n    throw new Error(\"Project not found\");\n  }\n\n  const sprint = await db.sprint.create({\n    data: {\n      name: data.name,\n      startDate: data.startDate,\n      endDate: data.endDate,\n      status: \"PLANNED\",\n      projectId: projectId,\n    },\n  });\n\n  return sprint;\n}\n\nexport async function updateSprintStatus(sprintId, newStatus) {\n  const { userId, orgId, orgRole } = auth();\n\n  if (!userId || !orgId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  try {\n    const sprint = await db.sprint.findUnique({\n      where: { id: sprintId },\n      include: { project: true },\n    });\n    console.log(sprint, orgRole);\n\n    if (!sprint) {\n      throw new Error(\"Sprint not found\");\n    }\n\n    if (sprint.project.organizationId !== orgId) {\n      throw new Error(\"Unauthorized\");\n    }\n\n    if (orgRole !== \"org:admin\") {\n      throw new Error(\"Only Admin can make this change\");\n    }\n\n    const now = new Date();\n    const startDate = new Date(sprint.startDate);\n    const endDate = new Date(sprint.endDate);\n\n    if (newStatus === \"ACTIVE\" && (now < startDate || now > endDate)) {\n      throw new Error(\"Cannot start sprint outside of its date range\");\n    }\n\n    if (newStatus === \"COMPLETED\" && sprint.status !== \"ACTIVE\") {\n      throw new Error(\"Can only complete an active sprint\");\n    }\n\n    const updatedSprint = await db.sprint.update({\n      where: { id: sprintId },\n      data: { status: newStatus },\n    });\n\n    return { success: true, sprint: updatedSprint };\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}"],"names":[],"mappings":";;;;;;AAEA;;AACA;;;;;AAEO,eAAe,uCAAU,GAAV,aAAa,SAAS,EAAE,IAAI;IAChD,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE7B,IAAI,CAAC,UAAU,CAAC,OAAO;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAU,MAAM,6GAAA,CAAA,KAAE,CAAC,OAAO,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE,IAAI;QAAU;QACvB,SAAS;YAAE,SAAS;gBAAE,SAAS;oBAAE,WAAW;gBAAO;YAAE;QAAE;IACzD;IAEA,IAAI,CAAC,WAAW,QAAQ,cAAc,KAAK,OAAO;QAChD,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,SAAS,MAAM,6GAAA,CAAA,KAAE,CAAC,MAAM,CAAC,MAAM,CAAC;QACpC,MAAM;YACJ,MAAM,KAAK,IAAI;YACf,WAAW,KAAK,SAAS;YACzB,SAAS,KAAK,OAAO;YACrB,QAAQ;YACR,WAAW;QACb;IACF;IAEA,OAAO;AACT;AAEO,eAAe,uCAAgB,GAAhB,mBAAmB,QAAQ,EAAE,SAAS;IAC1D,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAEtC,IAAI,CAAC,UAAU,CAAC,OAAO;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,MAAM,SAAS,MAAM,6GAAA,CAAA,KAAE,CAAC,MAAM,CAAC,UAAU,CAAC;YACxC,OAAO;gBAAE,IAAI;YAAS;YACtB,SAAS;gBAAE,SAAS;YAAK;QAC3B;QACA,QAAQ,GAAG,CAAC,QAAQ;QAEpB,IAAI,CAAC,QAAQ;YACX,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI,OAAO,OAAO,CAAC,cAAc,KAAK,OAAO;YAC3C,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI,YAAY,aAAa;YAC3B,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,MAAM,IAAI;QAChB,MAAM,YAAY,IAAI,KAAK,OAAO,SAAS;QAC3C,MAAM,UAAU,IAAI,KAAK,OAAO,OAAO;QAEvC,IAAI,cAAc,YAAY,CAAC,MAAM,aAAa,MAAM,OAAO,GAAG;YAChE,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI,cAAc,eAAe,OAAO,MAAM,KAAK,UAAU;YAC3D,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,gBAAgB,MAAM,6GAAA,CAAA,KAAE,CAAC,MAAM,CAAC,MAAM,CAAC;YAC3C,OAAO;gBAAE,IAAI;YAAS;YACtB,MAAM;gBAAE,QAAQ;YAAU;QAC5B;QAEA,OAAO;YAAE,SAAS;YAAM,QAAQ;QAAc;IAChD,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MAAM,MAAM,OAAO;IAC/B;AACF;;;IA5EsB;IA6BA;;AA7BA,+OAAA;AA6BA,+OAAA"}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}